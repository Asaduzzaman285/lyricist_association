import{r as h,u as g,c as f,j as e,d as $,b as S,N as T,F as N,B as P}from"./index-C5Q9qKp1.js";const y=h.forwardRef(({bsPrefix:c,className:m,striped:r,bordered:b,borderless:x,hover:i,size:o,variant:j,responsive:a,...u},v)=>{const d=g(c,"table"),p=f(m,d,j&&`${d}-${j}`,o&&`${d}-${o}`,r&&`${d}-${typeof r=="string"?`striped-${r}`:"striped"}`,b&&`${d}-bordered`,x&&`${d}-borderless`,i&&`${d}-hover`),s=e.jsx("table",{...u,className:p,ref:v});if(a){let t=`${d}-responsive`;return typeof a=="string"&&(t=`${t}-${a}`),e.jsx("div",{className:t,children:s})}return s}),A=()=>{var p;const[c,m]=h.useState(""),[r,b]=h.useState(null),[x,i]=h.useState(!1),o=$(),j=S();h.useEffect(()=>{const t=new URLSearchParams(o.search).get("order_id");t&&(m(t),a(t))},[o]);const a=async s=>{i(!0);try{const n=await(await fetch("https://api.lyricistsassociationbd.com/api/v1/order-tracking/order-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_number:s})})).json();n.status==="success"?setTimeout(()=>{b(n.data.order_details),i(!1)},500):(console.error("Error fetching order details:",n),i(!1))}catch(t){console.error("Error fetching order details:",t),i(!1)}},u=s=>{s.preventDefault(),j(`/tracker?order_id=${c}`),a(c)},v=s=>[{label:"Processing",isActive:s>=1,isCompleted:s>1,isCancelled:s===3,date:"Today",time:"11:29 AM",description:"Your order is being processed"},{label:"On the way",isActive:s>=2,isCompleted:s>2,isCancelled:s===3,date:"Tomorrow",time:"12:00 PM",description:"Your order is on the way"},{label:s===3?"Cancelled":"Delivered",isActive:s>=3,isCompleted:s>3,isCancelled:s===3,date:"Expected",time:"15:20 PM",description:s===3?"Your order has been cancelled":"Your order will be delivered soon"}],d=s=>{const t=v(s);return e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title m-0",children:"Order Status"})}),e.jsx("div",{className:"card-body pt-1",children:e.jsx("ul",{className:"timeline pb-0 mb-0",children:t.map((n,l)=>e.jsxs("li",{className:`timeline-item ${n.isActive?"timeline-item-transparent border-primary":n.isCancelled?"timeline-item-transparent border-danger":"timeline-item-transparent border-secondary"} ${l===t.length-1?"border-transparent pb-0":!n.isActive&&l!==t.length-1?"border-dashed":""}`,children:[e.jsx("span",{className:`timeline-point ${n.isActive?"timeline-point-primary":n.isCancelled?"timeline-point-danger":"timeline-point-secondary"}`}),e.jsxs("div",{className:`timeline-event ${l===t.length-1?"pb-0":""}`,children:[e.jsxs("div",{className:"timeline-header",children:[e.jsx("h6",{className:"mb-0",children:n.label}),n.isActive&&e.jsxs("small",{className:"text-body-secondary",children:[n.date," ",n.time]})]}),e.jsx("p",{className:`mt-${l===t.length-1?"1":"3"} mb-${l===t.length-1?"0":"3"}`,children:n.description})]})]},l))})})]})};return e.jsxs("div",{children:[e.jsx(T,{}),e.jsxs("div",{className:"container mt-4",children:[e.jsx("h1",{children:"Order Tracker"}),e.jsx(N,{onSubmit:u,className:"mb-4",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(N.Group,{controlId:"orderNumber",className:"flex-grow-1 me-2",children:e.jsx(N.Control,{type:"text",style:{color:"#000"},value:c,onChange:s=>m(s.target.value),placeholder:"Enter your order number",required:!0})}),e.jsx(P,{variant:"primary",type:"submit",children:"Search"})]})}),x&&e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),r&&!x&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:d(r.order_status.id)}),e.jsxs("div",{className:"order-details",children:[e.jsxs(y,{bordered:!0,hover:!0,className:"table-sm table-hover",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{children:"Customer Info"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{children:[e.jsxs("div",{children:["Name: ",r.name]}),e.jsxs("div",{children:["Email: ",r.email]}),e.jsxs("div",{children:["Phone: ",r.phone]}),e.jsxs("div",{children:["Address: ",r.shipping_address]}),e.jsxs("div",{children:["Payment Method: ",e.jsx("strong",{children:r.payment_method.payment_method})]}),e.jsxs("div",{children:["Payment Status: ",e.jsx("strong",{children:((p=r.payment_status)==null?void 0:p.status)||"Pending"})]})]})})})]}),e.jsxs(y,{bordered:!0,hover:!0,className:"table-sm table-hover mt-4",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{children:"Order Items"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:e.jsxs(y,{bordered:!0,hover:!0,className:"table-sm table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Total"})]})}),e.jsxs("tbody",{children:[r.order_detail.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.product.name}),e.jsxs("td",{children:[s.price," TK"]}),e.jsx("td",{children:s.qty}),e.jsxs("td",{children:[s.price*s.qty," TK"]})]},s.id)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{children:[r.sub_total," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Delivery Charge"})}),e.jsxs("td",{children:[r.delivery_charge," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Total"})}),e.jsxs("td",{children:[r.total," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Paid Amount"})}),e.jsxs("td",{children:[r.paid_amount," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Due"})}),e.jsxs("td",{children:[r.due," TK"]})]})]})]})})})})]})]})]})]})]})};export{A as default};
