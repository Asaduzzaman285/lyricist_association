import{r as p,u as T,j as e,c as y,m as _,d as w,b as O,N as E,F as b,B}from"./index-D9_yaZ4s.js";const P=1e3;function D(l,i,s){const a=(l-i)/(s-i)*100;return Math.round(a*P)/P}function $({min:l,now:i,max:s,label:a,visuallyHidden:m,striped:c,animated:o,className:j,style:h,variant:u,bsPrefix:x,...t},r){return e.jsx("div",{ref:r,...t,role:"progressbar",className:y(j,`${x}-bar`,{[`bg-${u}`]:u,[`${x}-bar-animated`]:o,[`${x}-bar-striped`]:o||c}),style:{width:`${D(i,l,s)}%`,...h},"aria-valuenow":i,"aria-valuemin":l,"aria-valuemax":s,children:m?e.jsx("span",{className:"visually-hidden",children:a}):a})}const N=p.forwardRef(({isChild:l=!1,...i},s)=>{const a={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...i};if(a.bsPrefix=T(a.bsPrefix,"progress"),l)return $(a,s);const{min:m,now:c,max:o,label:j,visuallyHidden:h,striped:u,animated:x,bsPrefix:t,variant:r,className:n,children:d,...v}=a;return e.jsx("div",{ref:s,...v,className:y(n,t),children:d?_(d,f=>p.cloneElement(f,{isChild:!0})):$({min:m,now:c,max:o,label:j,visuallyHidden:h,striped:u,animated:x,bsPrefix:t,variant:r},s)})});N.displayName="ProgressBar";const S=p.forwardRef(({bsPrefix:l,className:i,striped:s,bordered:a,borderless:m,hover:c,size:o,variant:j,responsive:h,...u},x)=>{const t=T(l,"table"),r=y(i,t,j&&`${t}-${j}`,o&&`${t}-${o}`,s&&`${t}-${typeof s=="string"?`striped-${s}`:"striped"}`,a&&`${t}-bordered`,m&&`${t}-borderless`,c&&`${t}-hover`),n=e.jsx("table",{...u,className:r,ref:x});if(h){let d=`${t}-responsive`;return typeof h=="string"&&(d=`${d}-${h}`),e.jsx("div",{className:d,children:n})}return n}),C=()=>{var t;const[l,i]=p.useState(""),[s,a]=p.useState(null),[m,c]=p.useState(!1),o=w(),j=O();p.useEffect(()=>{const n=new URLSearchParams(o.search).get("order_id");n&&(i(n),h(n))},[o]);const h=async r=>{c(!0);try{const d=await(await fetch("https://lyricistapi.wineds.com/api/v1/order-tracking/order-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_number:r})})).json();d.status==="success"?setTimeout(()=>{a(d.data.order_details),c(!1)},500):(console.error("Error fetching order details:",d),c(!1))}catch(n){console.error("Error fetching order details:",n),c(!1)}},u=r=>{r.preventDefault(),j(`/tracker?order_id=${l}`),h(l)},x=r=>{const n=[33,33,34],d=["Processing","On the way","Delivered"],v=["info","warning","success"];return r===3&&(d[2]="Cancelled",v[2]="danger"),e.jsx(N,{style:{height:"2rem"},children:n.map((f,g)=>e.jsx(N,{now:r>g?f:0,variant:r>g?v[g]:"light",label:r>g?d[g]:""},g))})};return e.jsxs("div",{children:[e.jsx(E,{}),e.jsxs("div",{className:"container mt-4",children:[e.jsx("h1",{children:"Order Tracker"}),e.jsx(b,{onSubmit:u,className:"mb-4",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(b.Group,{controlId:"orderNumber",className:"flex-grow-1 me-2",children:e.jsx(b.Control,{type:"text",value:l,onChange:r=>i(r.target.value),placeholder:"Enter your order number",required:!0})}),e.jsx(B,{variant:"primary",type:"submit",children:"Search"})]})}),m&&e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),s&&!m&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:x(s.order_status.id)}),e.jsx("div",{className:"grid gap-6",children:e.jsxs(S,{bordered:!0,hover:!0,className:"table-sm table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Customer Info"}),e.jsx("th",{children:"Order Items"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("div",{children:["Name: ",s.name]}),e.jsxs("div",{children:["Email: ",s.email]}),e.jsxs("div",{children:["Phone: ",s.phone]}),e.jsxs("div",{children:["Address: ",s.shipping_address]}),e.jsxs("div",{children:["Payment Method: ",e.jsx("strong",{children:s.payment_method.payment_method})]}),e.jsxs("div",{children:["Payment Status: ",e.jsx("strong",{children:((t=s.payment_status)==null?void 0:t.status)||"Pending"})]})]}),e.jsx("td",{children:e.jsxs(S,{bordered:!0,hover:!0,className:"table-sm table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Total"})]})}),e.jsxs("tbody",{children:[s.order_detail.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.product.name}),e.jsxs("td",{children:[r.price," TK"]}),e.jsx("td",{children:r.qty}),e.jsxs("td",{children:[r.price*r.qty," TK"]})]},r.id)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{children:[s.sub_total," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Delivery Charge"})}),e.jsxs("td",{children:[s.delivery_charge," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Total"})}),e.jsxs("td",{children:[s.total," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Paid Amount"})}),e.jsxs("td",{children:[s.paid_amount," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Due"})}),e.jsxs("td",{children:[s.due," TK"]})]})]})]})})]})})]})})]})]})]})};export{C as default};
