import{r as a,j as e,N as C}from"./index-B91iYty9.js";import{a as g}from"./axios-upsvKRUO.js";import{M as i}from"./Modal-BdUc6bNA.js";import{B as M}from"./Button-VlsDrXsi.js";import"./index-Chjiymov.js";const A=()=>{const[u,j]=a.useState([]),[l,f]=a.useState(1),[c,b]=a.useState({}),[t,n]=a.useState(null),[N,o]=a.useState(!1),d="https://lyricistapi.wineds.com",m="https://lyricistadminapi.wineds.com";a.useEffect(()=>{S(l)},[l]);const S=async s=>{try{const r=(await g.get(`${d}/api/v1/success-stories/list-paginate?page=${s}`)).data;if(r.status==="success"){const v=await Promise.all(r.data.data.map(async p=>{const y=(await g.get(`${d}/api/v1/members/single-data/${p.member_id}`)).data.data;return{...p,member_name:y.name}}));j(v),b(r.data.paginator)}else console.error("Failed to fetch stories:",r.message)}catch(x){console.error("Error fetching stories:",x)}},w=s=>{f(s)},_=s=>{n(s),o(!0)},h=()=>{o(!1),n(null)};return e.jsxs(e.Fragment,{children:[e.jsx(C,{}),e.jsx("div",{className:"container-fluid bg-dark",children:e.jsxs("div",{className:"container",style:{padding:"20px",borderRadius:"8px"},children:[e.jsx("h1",{className:"text-center text-light mb-4",children:"Success Stories"}),e.jsx("div",{className:"row",children:u.map(s=>e.jsx("div",{className:"col-12 mb-4",children:e.jsxs("div",{className:"cards story-card d-flex flex-row p-3",style:{backgroundColor:"rgba(165, 239, 255, 0.2)"},children:[s.file_path&&e.jsx("img",{src:`${m}${s.file_path}`,alt:s.headline,className:"img-fluid story-image w-50"}),e.jsxs("div",{className:"card-body w-50 text-start text-light",children:[e.jsx("h2",{className:"card-title",children:s.headline}),e.jsxs("h5",{children:[" Posted on: ",s.posting_time]}),e.jsxs("h6",{className:"card-subtitle mb-2 text-highlight",children:["By ",s.member_name," "]}),e.jsx("p",{className:"card-text text-start fw-normal",children:s.details}),e.jsx("button",{type:"button",className:"btn btn-light text-start w-25",onClick:()=>_(s),children:"Read More"})]})]})},s.id))}),c.total_pages>1&&e.jsx("nav",{children:e.jsx("ul",{className:"pagination justify-content-center",children:[...Array(c.total_pages).keys()].map(s=>e.jsx("li",{className:`page-item ${l===s+1?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>w(s+1),children:s+1})},s+1))})})]})}),t&&e.jsxs(i,{show:N,onHide:h,centered:!0,dialogClassName:"custom-modal-width",children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:t.headline})}),e.jsxs(i.Body,{children:[t.file_path&&e.jsx("img",{src:`${m}${t.file_path}`,alt:t.headline,className:"img-fluid",style:{width:"100%",borderRadius:"8px"}}),e.jsx("h5",{className:"mt-3",children:t.subheading}),e.jsxs("h6",{className:"text-muted",children:["By ",t.member_name," | Posted on: ",t.posting_time]}),e.jsx("p",{className:"mt-3",children:t.details})]}),e.jsx(i.Footer,{children:e.jsx(M,{variant:"secondary",onClick:h,children:"Close"})})]})]})};export{A as default};
