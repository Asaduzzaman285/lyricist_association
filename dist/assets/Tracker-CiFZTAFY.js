import{r as p,u as T,j as e,c as P,m as _,d as w,b as O,N as E,F as f,B}from"./index-DCyFZ4Zq.js";const $=1e3;function D(l,i,r){const a=(l-i)/(r-i)*100;return Math.round(a*$)/$}function S({min:l,now:i,max:r,label:a,visuallyHidden:j,striped:c,animated:o,className:m,style:h,variant:u,bsPrefix:x,...t},s){return e.jsx("div",{ref:s,...t,role:"progressbar",className:P(m,`${x}-bar`,{[`bg-${u}`]:u,[`${x}-bar-animated`]:o,[`${x}-bar-striped`]:o||c}),style:{width:`${D(i,l,r)}%`,...h},"aria-valuenow":i,"aria-valuemin":l,"aria-valuemax":r,children:j?e.jsx("span",{className:"visually-hidden",children:a}):a})}const y=p.forwardRef(({isChild:l=!1,...i},r)=>{const a={min:0,max:100,animated:!1,visuallyHidden:!1,striped:!1,...i};if(a.bsPrefix=T(a.bsPrefix,"progress"),l)return S(a,r);const{min:j,now:c,max:o,label:m,visuallyHidden:h,striped:u,animated:x,bsPrefix:t,variant:s,className:n,children:d,...v}=a;return e.jsx("div",{ref:r,...v,className:P(n,t),children:d?_(d,b=>p.cloneElement(b,{isChild:!0})):S({min:j,now:c,max:o,label:m,visuallyHidden:h,striped:u,animated:x,bsPrefix:t,variant:s},r)})});y.displayName="ProgressBar";const N=p.forwardRef(({bsPrefix:l,className:i,striped:r,bordered:a,borderless:j,hover:c,size:o,variant:m,responsive:h,...u},x)=>{const t=T(l,"table"),s=P(i,t,m&&`${t}-${m}`,o&&`${t}-${o}`,r&&`${t}-${typeof r=="string"?`striped-${r}`:"striped"}`,a&&`${t}-bordered`,j&&`${t}-borderless`,c&&`${t}-hover`),n=e.jsx("table",{...u,className:s,ref:x});if(h){let d=`${t}-responsive`;return typeof h=="string"&&(d=`${d}-${h}`),e.jsx("div",{className:d,children:n})}return n}),C=()=>{var t;const[l,i]=p.useState(""),[r,a]=p.useState(null),[j,c]=p.useState(!1),o=w(),m=O();p.useEffect(()=>{const n=new URLSearchParams(o.search).get("order_id");n&&(i(n),h(n))},[o]);const h=async s=>{c(!0);try{const d=await(await fetch("https://lyricistapi.wineds.com/api/v1/order-tracking/order-details",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order_number:s})})).json();d.status==="success"?setTimeout(()=>{a(d.data.order_details),c(!1)},500):(console.error("Error fetching order details:",d),c(!1))}catch(n){console.error("Error fetching order details:",n),c(!1)}},u=s=>{s.preventDefault(),m(`/tracker?order_id=${l}`),h(l)},x=s=>{const n=[33,33,34],d=["Processing","On the way","Delivered"],v=["info","warning","success"];return s===3&&(d[2]="Cancelled",v[2]="danger"),e.jsx(y,{style:{height:"2rem"},children:n.map((b,g)=>e.jsx(y,{now:s>g?b:0,variant:s>g?v[g]:"light",label:s>g?d[g]:""},g))})};return e.jsxs("div",{children:[e.jsx(E,{}),e.jsxs("div",{className:"container mt-4",children:[e.jsx("h1",{children:"Order Tracker"}),e.jsx(f,{onSubmit:u,className:"mb-4",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx(f.Group,{controlId:"orderNumber",className:"flex-grow-1 me-2",children:e.jsx(f.Control,{type:"text",value:l,onChange:s=>i(s.target.value),placeholder:"Enter your order number",required:!0})}),e.jsx(B,{variant:"primary",type:"submit",children:"Search"})]})}),j&&e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),r&&!j&&e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:x(r.order_status.id)}),e.jsxs("div",{className:"order-details",children:[e.jsxs(N,{bordered:!0,hover:!0,className:"table-sm table-hover",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{children:"Customer Info"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{children:[e.jsxs("div",{children:["Name: ",r.name]}),e.jsxs("div",{children:["Email: ",r.email]}),e.jsxs("div",{children:["Phone: ",r.phone]}),e.jsxs("div",{children:["Address: ",r.shipping_address]}),e.jsxs("div",{children:["Payment Method: ",e.jsx("strong",{children:r.payment_method.payment_method})]}),e.jsxs("div",{children:["Payment Status: ",e.jsx("strong",{children:((t=r.payment_status)==null?void 0:t.status)||"Pending"})]})]})})})]}),e.jsxs(N,{bordered:!0,hover:!0,className:"table-sm table-hover mt-4",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{children:"Order Items"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{children:e.jsxs(N,{bordered:!0,hover:!0,className:"table-sm table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Product Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Total"})]})}),e.jsxs("tbody",{children:[r.order_detail.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.product.name}),e.jsxs("td",{children:[s.price," TK"]}),e.jsx("td",{children:s.qty}),e.jsxs("td",{children:[s.price*s.qty," TK"]})]},s.id)),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Subtotal"})}),e.jsxs("td",{children:[r.sub_total," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Delivery Charge"})}),e.jsxs("td",{children:[r.delivery_charge," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Total"})}),e.jsxs("td",{children:[r.total," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Paid Amount"})}),e.jsxs("td",{children:[r.paid_amount," TK"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"text-end",children:e.jsx("strong",{children:"Due"})}),e.jsxs("td",{children:[r.due," TK"]})]})]})]})})})})]})]})]})]})]})};export{C as default};
